{"remainingRequest":"/Users/baloulee/Desktop/github/hostel-reservation-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/baloulee/Desktop/github/hostel-reservation-vue/src/views/Edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/baloulee/Desktop/github/hostel-reservation-vue/src/views/Edit.vue","mtime":1604324717239},{"path":"/Users/baloulee/Desktop/github/hostel-reservation-vue/node_modules/cache-loader/dist/cjs.js","mtime":1604264270184},{"path":"/Users/baloulee/Desktop/github/hostel-reservation-vue/node_modules/babel-loader/lib/index.js","mtime":1604264269768},{"path":"/Users/baloulee/Desktop/github/hostel-reservation-vue/node_modules/cache-loader/dist/cjs.js","mtime":1604264270184},{"path":"/Users/baloulee/Desktop/github/hostel-reservation-vue/node_modules/vue-loader/lib/index.js","mtime":1604264273750}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogWyJlbmRwb2ludCIsICJjb2x1bW5zIiwgImZvcm1GaWVsZHMiXSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZWRpdGVkSXRlbTogdGhpcy5mb3JtRmllbGRzLAogICAgICBtb2RhbFNob3c6IGZhbHNlLAogICAgICBlZGl0ZWRJbmRleDogLTEsCiAgICAgIHRhYmxlRGF0YTogW10KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgZm9ybVRpdGxlKCkgewogICAgICByZXR1cm4gdGhpcy5lZGl0ZWRJbmRleCA9PT0gLTEgPyAiTmV3IEl0ZW0iIDogIkVkaXQgSXRlbSI7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBjcmVhdGVJdGVtKCkgewogICAgICB0aGlzLm1vZGFsU2hvdyA9IHRydWU7CiAgICAgIHRoaXMuZWRpdGVkSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZm9ybUZpZWxkcyk7CiAgICAgIHRoaXMuZWRpdGVkSW5kZXggPSAtMTsKICAgIH0sCiAgICBlZGl0SXRlbShpdGVtKSB7CiAgICAgIHRoaXMubW9kYWxTaG93ID0gdHJ1ZTsKICAgICAgdGhpcy5lZGl0ZWRJbmRleCA9IHRoaXMudGFibGVEYXRhLmluZGV4T2YoaXRlbSk7CiAgICAgIHRoaXMuZWRpdGVkSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIGl0ZW0pOwogICAgfSwKICAgIGRlbGV0ZUl0ZW0oaXRlbSkgewogICAgICBjb25zdCBpbmRleCA9IHRoaXMudGFibGVEYXRhLmluZGV4T2YoaXRlbSk7CiAgICAgIGNvbmZpcm0oIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBpdGVtPyIpICYmCiAgICAgICAgdGhpcy50YWJsZURhdGEuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgYXhpb3MuZGVsZXRlKHRoaXMuZW5kcG9pbnQgKyAiLyIgKyBpdGVtLmlkKTsKICAgIH0sCiAgICBjbG9zZSgpIHsKICAgICAgdGhpcy5tb2RhbFNob3cgPSBmYWxzZTsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy5lZGl0ZWRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5mb3JtRmllbGRzKTsKICAgICAgICB0aGlzLmVkaXRlZEluZGV4ID0gLTE7CiAgICAgIH0sIDMwMCk7CiAgICB9LAogICAgc2F2ZSgpIHsKICAgICAgaWYgKHRoaXMuZWRpdGVkSW5kZXggPiAtMSkgewogICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy50YWJsZURhdGFbdGhpcy5lZGl0ZWRJbmRleF0sIHRoaXMuZWRpdGVkSXRlbSk7CiAgICAgICAgYXhpb3MucHV0KHRoaXMuZW5kcG9pbnQgKyAiLyIgKyB0aGlzLmVkaXRlZEl0ZW0uaWQsIHRoaXMuZWRpdGVkSXRlbSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy50YWJsZURhdGEucHVzaCh0aGlzLmVkaXRlZEl0ZW0pOwogICAgICAgIGF4aW9zLnBvc3QodGhpcy5lbmRwb2ludCwgdGhpcy5lZGl0ZWRJdGVtKTsKICAgICAgfQogICAgICB0aGlzLmNsb3NlKCk7CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgYXhpb3ModGhpcy5lbmRwb2ludCkudGhlbigKICAgICAgcmVzcG9uc2UgPT4gKHRoaXMudGFibGVEYXRhID0gcmVzcG9uc2UuZGF0YS5kYXRhKQogICAgKTsKICB9Cn07Cg=="},{"version":3,"sources":["Edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Edit.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <b-button @click=\"createItem\" class=\"mb-2\" variant=\"primary\" size=\"sm\">Create</b-button>\n\n    <b-table striped hover :items=\"tableData\" :fields=\"columns\">\n      <template #cell(action)=\"data\">\n        <b-button @click=\"editItem(data.item)\" variant=\"primary\" size=\"sm\">Edit</b-button>\n        <b-button\n          @click=\"deleteItem(data.item)\"\n          v-b-modal=\"'edit-modal'\"\n          variant=\"danger\"\n          size=\"sm\"\n        >Delete</b-button>\n      </template>\n    </b-table>\n\n    <b-modal v-model=\"modalShow\" :title=\"formTitle\" hide-footer>\n      <b-form @submit.prevent=\"save\">\n        <slot :formdata=\"editedItem\" name=\"input-fields\"></slot>\n\n        <b-button size=\"sm\" variant=\"danger\" @click=\"close\">Cancel</b-button>\n\n        <b-button type=\"submit\" size=\"sm\" variant=\"success\">Submit</b-button>\n      </b-form>\n    </b-modal>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: [\"endpoint\", \"columns\", \"formFields\"],\n  data() {\n    return {\n      editedItem: this.formFields,\n      modalShow: false,\n      editedIndex: -1,\n      tableData: []\n    };\n  },\n  computed: {\n    formTitle() {\n      return this.editedIndex === -1 ? \"New Item\" : \"Edit Item\";\n    }\n  },\n  methods: {\n    createItem() {\n      this.modalShow = true;\n      this.editedItem = Object.assign({}, this.formFields);\n      this.editedIndex = -1;\n    },\n    editItem(item) {\n      this.modalShow = true;\n      this.editedIndex = this.tableData.indexOf(item);\n      this.editedItem = Object.assign({}, item);\n    },\n    deleteItem(item) {\n      const index = this.tableData.indexOf(item);\n      confirm(\"Are you sure you want to delete this item?\") &&\n        this.tableData.splice(index, 1);\n      axios.delete(this.endpoint + \"/\" + item.id);\n    },\n    close() {\n      this.modalShow = false;\n      setTimeout(() => {\n        this.editedItem = Object.assign({}, this.formFields);\n        this.editedIndex = -1;\n      }, 300);\n    },\n    save() {\n      if (this.editedIndex > -1) {\n        Object.assign(this.tableData[this.editedIndex], this.editedItem);\n        axios.put(this.endpoint + \"/\" + this.editedItem.id, this.editedItem);\n      } else {\n        this.tableData.push(this.editedItem);\n        axios.post(this.endpoint, this.editedItem);\n      }\n      this.close();\n    }\n  },\n  created() {\n    axios(this.endpoint).then(\n      response => (this.tableData = response.data.data)\n    );\n  }\n};\n</script>"]}]}